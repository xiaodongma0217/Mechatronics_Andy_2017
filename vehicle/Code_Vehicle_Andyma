const int sampleWindow = 250; // Sample window width in mS (250 mS = 4Hz)
unsigned int knock;
int motorPin = A1;
int motorPin2 = A2;


void setup() 
{
   Serial.begin(9600);
  pinMode(motorPin, OUTPUT);
  pinMode(motorPin2, OUTPUT);
}

void loop() 
{
 unsigned long start= millis();  // Start of sample window
 unsigned int peakToPeak = 0;   // peak-to-peak level

 unsigned int signalMax = 0;
 unsigned int signalMin = 1024;

 // collect data for 250 miliseconds
 while (millis() - start < sampleWindow)
 {
   knock = analogRead(A0);
      if (knock < 1024)  //This is the max of the 10-bit ADC so this loop will include all readings
      {
         if (knock > signalMax)
         {
           signalMax = knock;  // save just the max levels
         }
      else if (knock < signalMin)
        {
         signalMin = knock;  // save just the min levels
         }
     }
 }
 peakToPeak = signalMax - signalMin;  // max - min = peak-peak amplitude
 //double volts = (peakToPeak * 3.3) / 1024;  // convert to volts


Serial.println(peakToPeak);
if (peakToPeak < 1000)
 {
  //turn on
  analogWrite(motorPin, 140);
  analogWrite(motorPin2, 140);
   delay(500);
  Serial.println("Knock Knock");
 }
 else
 {
 //turn off
 analogWrite(motorPin, 0);
 analogWrite(motorPin2, 140);
 }             
 
}
